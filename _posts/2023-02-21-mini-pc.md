---
layout: post
title: 我的零刻小主机
category: tech
---

最近做了一个[ETF量化交易策略](https://github.com/piginzoo/quant_research/tree/main/dingtou/dingtou/iquant), 需要有一台机器来执行它，需要windows操作系统的，上面需要运行实盘软件QMT和一些监控程序。

我最开始就是想买一台云主机，但是，一看价格，阿里云的2核4G内存的，还是共享型的主机，一年先来要1428，看了其他平台，价格也伯仲之间。于是觉得不值，就想到了能不能买一台mini主机，放到家里。这样还安全。

于是，在京东搜索后，和各种谷歌后，终于找到了一款满意的mini主机，[零刻SER5-R5-5600H](https://item.jd.com/10063411447702.html)，16G内存，6核12线程AMD CPU，500G固态盘，2100元。而且，个头非常非常小，大概只有饭盒大小。相当满意，于是果断购买。

![](/images/20230221/1676990998201.jpg){:class="myimg100"}

待我安装完各种软件后，把策略部署到QMT软件中，终于可以实盘交易了。

然后，我就开始考虑，如何保证这个小机器的维护和可用性。

于是我在bios中，设置了每天9点就自动开机，这样9:30交易的时候，他就ready了。

到了下午15:30，我设置了一个windows自动关机，交易结束后，他会自动关机了。

然后，我写了一个心跳程序，往我的云服务器推送心跳和交易信息，这样，我在我的云服务器上，可以随时了解到这台mini主机在交易期间的情况。

如果出现了交易机会和实盘下单，mini主机上的qmt程序，都会推送信息到我的微信、企业微信和邮件上，方便到第一时间知道。

这样，貌似完美了，但是，我担心万一我出门在外，这台机器出问题了咋办？

于是我想到了使用远程控制的软件，我装了一个向日葵软件，这样，我就可以随时远程回家，查看mini主机的运行情况了。

可是，如果某种原因，他没有在交易时间开机，或者中途死机了，而我又在外面，咋办？

我突然看到了一个向日葵提供的方案，一个[远程控制的开关C1 pro](https://store.oray.com/product/330019.html)，是向日葵售卖的一个硬件，你可以通过它，远程对mini主机进行开关了。

这个方案听上去非常棒，于是我下单买了一个，很便宜，39元。

开关到了后，我按照说明书配置，却卡在了路由器配置上，我的路由器是华硕的，它这个智能开关很诡异，必须使用2.4G的wifi网络，我只好关闭了5G wifi，还是不行，我有按照它提供的[排查文档](https://sunlogin.oray.com/news/17453.html )逐一修改wifi路由器配置，依然不行。实在是没招了，我联系了客服，客服给我一个配置截图，我对比了下，发现只有一处和他发图的不一样，就是把无线模式改成”Legacy“，修改后，果然就好了。

![](/images/20230221/1676991317100.jpg){:class="myimg100"}

配置好路由器后，接下来是修改mini主机的bios，开启一个叫AC Power Recovery的特性，这个特性是说，当你电源断掉又重新接通的时候，你可以自动触发开机，[向日葵也就是用了这个特性](https://service.oray.com/question/6178.html )，远程打开开关，从而触发开机的。默认主板上这个特性是关闭的。

可是，我翻遍了零刻这台mini主机的bios设置，就是找不到任何AC Recovery的设置。我有些绝望了，到那时仍然不甘心，就挨个逐项地看bios，终于发现，有一个叫AMD CB的配置项里，藏的很深的地方，有一个AC Power的选项：

`AMD CBS > FCH Common Options > AC Power Loss Options > AC Loss Control`

把值从Always Off改成Always On后，我试了一下，果然，电源一接通，零刻的主机就立刻启动了。

终于，所有的问题都完美解决了，我终于可以开始地写策略和交易了。



